{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Orden de Trabajo #{{ orden.pk }}</title>
    {% load static %}
    <style>
        body {
            font-family: 'Helvetica', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        .container {
            width: 750px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
        }

        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 10px;
        }

        .header-container {
            display: table;
            width: 100%;
        }

        .header-left, .header-right {
            display: table-cell;
            vertical-align: top;
            width: 50%;
        }

        .header-left h1, .header-left h2 {
            margin: 0;
        }

        .header-right p {
            margin: 5px 0;
            text-align: right;
        }

        section {
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
        }

        h3 {
            color: #2c3e50;
            margin-top: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border: 1px solid #ddd;
            vertical-align: top;
        }

        th {
            background-color: #34495e;
            color: white;
        }

        .descripcion {
            white-space: pre-wrap;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 12px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
<div class="container">

    <header>
        <div class="header-container">
            <div class="header-left">
                <h1>Orden de Trabajo</h1>
                <h2>ID: {{ orden.pk }}</h2>
            </div>
            <div class="header-right">
                <p><strong>Fecha:</strong> {{ orden.fecha|date:"d/m/Y" }}</p>
                <p><strong>Hora Inicio:</strong> {{ orden.hora_inicio|default:"-" }}</p>
                <p><strong>Hora Fin:</strong> {{ orden.hora_fin|default:"-" }}</p>
            </div>
        </div>
    </header>

    <section class="datos-generales">
        <h3>Datos Generales</h3>
        <table>
            <tbody>
                <tr>
                    <th>Vehículo:</th>
                    <td>{{ orden.vehiculo }}</td>
                </tr>
                <tr>
                    <th>Kilometraje:</th>
                    <td>{{ orden.kilometraje }}</td>
                </tr>
                <tr>
                    <th>Tipo de Mantenimiento:</th>
                    <td>{{ orden.tipo_mantenimiento }}</td>
                </tr>
                <tr>
                    <th>Descripción:</th>
                    <td class="descripcion">{{ orden.descripcion|linebreaksbr }}</td>
                </tr>
                <tr>
                    <th>Zona / Circuito:</th>
                    <td>{{ orden.zona }} / {{ orden.circuito }}</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="tecnicos">
        <h3>Técnicos</h3>
        <table>
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Legajo</th>
                </tr>
            </thead>
            <tbody>
                {% for tecnico in tecnicos %}
                <tr>
                    <td>{{ tecnico.nombre }}</td>
                    <td>{{ tecnico.legajo }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="2" style="text-align:center;">No hay técnicos asignados</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <section class="materiales">
        <h3>Materiales Usados</h3>
        <table>
            <thead>
                <tr>
                    <th>Material</th>
                    <th>Cantidad</th>
                    <th>Unidad</th>
                </tr>
            </thead>
            <tbody>
                {% for item in materiales_usados %}
                <tr>
                    <td>{{ item.material.nombre }}</td>
                    <td>{{ item.cantidad }}</td>
                    <td>{{ item.unidad }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="3" style="text-align:center;">No se usaron materiales</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <footer>
        <p>© {{ now|date:"Y" }} - Sector de Mantenimiento Eléctrico</p>
    </footer>

</div>
</body>
</html>
